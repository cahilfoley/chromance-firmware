[platformio]
; Enable the global build cache
build_cache_dir = ~/.platformio/.build_cache_dir

[env]
; Common settings for all environments
lib_deps = 
	mathertel/OneButton@^2.5.0
	fastled/FastLED@^3.6.0
	dawidchyrzynski/home-assistant-integration@^2.1.0
monitor_speed = 115200
; Enable parallel builds (adjust based on your CPU cores)
build_flags =
    -D VERSION=1.0.0
    -Os ; Optimize for size
build_unflags = -fno-rtti
; Share libraries between projects
lib_ldf_mode = chain+
; Enable precompiled headers
build_src_flags = -include "include/precompiled_header.h"

[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino
upload_speed = 921600
upload_protocol = espota
upload_port = chromance-esp32.local
; upload_port = 192.168.1.27
upload_flags = -p 3232
; Enable more parallel compilation for production builds
build_flags = 
    ${env.build_flags}
    -DRELEASE_BUILD

[env:development]
platform = espressif32
board = esp32dev
framework = arduino
upload_speed = 921600
upload_protocol = espota
upload_port = chromance-esp32.local
upload_flags = -p 3232
; Enable faster compilation for development builds
build_flags = 
    ${env.build_flags}
    -DDEVELOPMENT_BUILD
    -g0 ; No debug info for faster builds
    -Wno-unused-variable ; Reduce warnings
    -Wno-unused-function ; Reduce warnings